(this.webpackJsonpsimpleapp=this.webpackJsonpsimpleapp||[]).push([[0],{10:function(e,t,a){e.exports=a(17)},17:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),s=a(7),r=a.n(s),l=a(2),o=a(3),c=a(1),u=a(4),d=a(5),h=new(a(8).Dispatcher);function m(e){h.dispatch({type:"UPDATEPROFILE",id:e})}function p(e){h.dispatch({type:"SORTPROFILE",key:e})}var f=function(e){return n.a.createElement("input",{className:e.inputValid?"valid":"notvalid",id:e.inputId,name:e.inputName,type:e.inputType,value:e.inputValue,onChange:e.inputChange,placeholder:e.inputPlaceholder})},v=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={filter:""},i.handleFilter=i.handleFilter.bind(Object(c.a)(i)),i}return Object(o.a)(a,[{key:"handleFilter",value:function(e){var t,a=e.target.value;t=a,h.dispatch({type:"FILTERPROFILE",data:t}),this.setState({filter:a})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("header",{className:"App-header"},n.a.createElement("div",{className:"logo"},"SimpleApp"),n.a.createElement("div",{className:"filters r"},n.a.createElement("button",{className:"r",onClick:function(){p("age")}},"Sort By AGE"),n.a.createElement("button",{className:"r",onClick:function(){p("name")}},"Sort By NAME"),n.a.createElement("button",{className:"r",onClick:function(){p("sex")}},"Sort By SEX"),n.a.createElement(f,{inputValid:!0,inputName:"filter",inputId:"filter",inputType:"text",inputValue:this.state.filter,inputPlaceholder:"filter",inputLimit:"120",inputChange:this.handleFilter}))))}}]),a}(i.Component),E=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"w3"},n.a.createElement("div",{className:"profile"},n.a.createElement("h2",null,this.props.name),n.a.createElement("div",{className:"stats c"},n.a.createElement("div",{className:"w2"},"age:",n.a.createElement("b",null,this.props.age)),n.a.createElement("div",{className:"w2"},"sex:",n.a.createElement("b",null,this.props.sex))),n.a.createElement("div",{className:"c"},"Updated:",n.a.createElement("b",null,this.props.updatedDate)),n.a.createElement("div",{className:"update c"},n.a.createElement("div",{className:"w2"},n.a.createElement("button",{onClick:function(){return t=e.props.currentid,void h.dispatch({type:"DELETEPROFILE",id:t});var t}},"delete")),n.a.createElement("div",{className:"w2"},n.a.createElement("button",{onClick:function(){return m(e.props.currentid)}},"Change")))))}}]),a}(i.Component),g=function(e){return n.a.createElement("div",null,n.a.createElement("select",{id:e.selectId,name:e.selectName,value:e.selectValue,onChange:e.selectChange},e.selectOptions.map((function(e){return n.a.createElement("option",{key:e[0],value:e[0],label:e[1]},e[1])}))))},b=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).store={profiles:[],defProfile:{name:"",age:20,sex:"O"},filter:"",id:-1},e}return Object(o.a)(a,[{key:"iniProfile",value:function(e){this.store.profiles=e,this.emit("change")}},{key:"createProfile",value:function(e,t){var a=this,i=new Date;e.updatedDate=i.toISOString();var n=this.store.profiles.filter((function(e){return e.name.toLowerCase().includes(a.store.filter.toLowerCase())}));if(t<0||t>=this.store.profiles.length)this.store.profiles.push(e);else for(var s in this.store.profiles)n[t].name===this.store.profiles[s].name&&n[t].age===this.store.profiles[s].age&&n[t].sex===this.store.profiles[s].sex&&n[t].updated===this.store.profiles[s].updated&&(this.store.profiles[s]=e);this.store.id=-1,this.emit("change")}},{key:"updateProfile",value:function(e){var t=this;e in this.store.profiles.filter((function(e){return e.name.toLowerCase().includes(t.store.filter.toLowerCase())}))?(this.store.id=e,this.emit("change")):(this.store.id=-1,this.emit("change"))}},{key:"deleteProfile",value:function(e){var t=this,a=this.store.profiles.filter((function(e){return e.name.toLowerCase().includes(t.store.filter.toLowerCase())}));for(var i in this.store.profiles)a[e].name===this.store.profiles[i].name&&a[e].age===this.store.profiles[i].age&&a[e].sex===this.store.profiles[i].sex&&a[e].updated===this.store.profiles[i].updated&&(this.store.profiles.splice(i,1),this.emit("change"))}},{key:"sortProfile",value:function(e){this.store.profiles.sort((function(t,a){var i=t[e],n=a[e];return"name"===e&&(i=t[e].toLowerCase(),n=a[e].toLowerCase()),i>n?1:-1})),this.store.id=-1,this.emit("change")}},{key:"filterProfile",value:function(e){this.store.id=-1,this.store.filter=e,this.emit("change")}},{key:"getAll",value:function(){return this.store}},{key:"getDefault",value:function(){return this.store.defProfile}},{key:"handleAction",value:function(e){switch(e.type){case"CREATEPROFILE":this.createProfile(e.item,e.id);break;case"UPDATEPROFILE":this.updateProfile(e.id);break;case"DELETEPROFILE":this.deleteProfile(e.id);break;case"FILTERPROFILE":this.filterProfile(e.data);break;case"SORTPROFILE":this.sortProfile(e.key)}}}]),a}(a(9).EventEmitter));h.register(b.handleAction.bind(b));var y=b,N=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={validName:!0,validAge:!0,validSex:!0,validMessage:"",name:"",age:20,sex:"O"},i.handleSubmit=i.handleSubmit.bind(Object(c.a)(i)),i.handleAge=i.handleAge.bind(Object(c.a)(i)),i.handleSex=i.handleSex.bind(Object(c.a)(i)),i.handleName=i.handleName.bind(Object(c.a)(i)),i}return Object(o.a)(a,[{key:"handleAge",value:function(e){var t=parseInt(e.target.value);this.validateAge(t),this.setState({age:t})}},{key:"handleSex",value:function(e){var t=e.target.value;this.setState({sex:t})}},{key:"handleName",value:function(e){var t=e.target.value;this.validateName(t),this.setState({name:t})}},{key:"validateName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!0,i=/^[a-z]+$/i;return i.test(e)||(a=!1,t="NAME should contain only [a-z] letters"),e.length>10&&(a=!1,t="NAME should be shorter than 11 Leters"),e.length<2&&(a=!1,t="NAME should have at least 2 Leters"),this.setState({validMessage:t,validName:a}),a}},{key:"validateAge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!0;return e<2&&(a=!1,t="AGE should be above 1"),e>129&&(a=!1,t="AGE should be bellow 130"),this.setState({validMessage:t,validAge:a}),a}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.validateName(e.target.elements.name.value,"")&&this.validateAge(e.target.elements.age.value,"")){!function(e,t){h.dispatch({type:"CREATEPROFILE",id:t,item:e})}({name:e.target.elements.name.value,age:e.target.elements.age.value,sex:e.target.elements.sex.value},e.target.elements.hiddenid.value);var t=y.getDefault();this.setState({name:t.name,age:t.age,sex:t.sex})}}},{key:"componentWillMount",value:function(){this.setState({name:this.props.item.name,age:this.props.item.age,sex:this.props.item.sex})}},{key:"render",value:function(){return n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("div",{className:"w3"},n.a.createElement("div",{className:"profile"},n.a.createElement("h2",null,n.a.createElement(f,{inputValid:this.state.validName,inputName:"name",inputId:"name",inputType:"text",inputValue:this.state.name,inputPlaceholder:"name",inputChange:this.handleName})),n.a.createElement("div",{className:"stats c"},n.a.createElement("div",{className:"w2"},"age:",n.a.createElement(f,{inputValid:this.state.validAge,inputName:"age",inputId:"age",inputType:"number",inputValue:this.state.age,inputPlaceholder:"age",inputLimit:"120",inputChange:this.handleAge})),n.a.createElement("div",{className:"w2"},"sex:",n.a.createElement(g,{inputValid:this.state.validSex,selectName:"sex",selectId:"sex",selectChange:this.handleSex,selectValue:this.state.sex,selectOptions:[["F","female"],["M","male"],["O","Other"]]}))),n.a.createElement("div",{className:"c"},n.a.createElement("b",null,this.state.validMessage)),n.a.createElement("div",{className:"update c"},n.a.createElement(f,{inputName:"hiddenid",inputId:"hiddenid",inputType:"hidden",inputValue:this.props.currentid,inputPlaceholder:"hiddenid",inputLimit:"99999"}),n.a.createElement("div",{className:"w2"},n.a.createElement("button",{type:"submit"},this.props.currentid<0?"Create":"Update")),n.a.createElement("div",{className:"w2"},this.props.currentid>=0&&n.a.createElement("button",{onClick:function(){return m(-1)},type:"button"},"Cancel"))))))}}]),a}(i.Component),O=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={store:y.getAll()},i.iniPrf=i.iniPrf.bind(Object(c.a)(i)),i}return Object(o.a)(a,[{key:"iniPrf",value:function(e){y.iniProfile(e)}},{key:"componentWillMount",value:function(){var e=this;fetch("/data/data.json").then((function(e){return e.json()})).then((function(t){return e.iniPrf(t)})),y.on("change",(function(){e.setState({store:y.getAll()})}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"App"},n.a.createElement(v,{filter:this.state.store.filter}),this.state.store.profiles.filter((function(t){return t.name.toLowerCase().includes(e.state.store.filter.toLowerCase())})).map((function(t,a){return n.a.createElement("div",{key:a},e.state.store.id==a?n.a.createElement(N,{id:a,currentid:a,item:t}):n.a.createElement(E,Object.assign({currentid:a},t)))})),n.a.createElement("div",{className:"c"},this.state.store.id<0&&""===this.state.store.filter&&n.a.createElement(N,{key:"-1",currentid:"-1",item:this.state.store.defProfile})))}}]),a}(i.Component);r.a.render(n.a.createElement(O,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.c4b2e4db.chunk.js.map